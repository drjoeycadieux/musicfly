{% extends "layout.html" %}
{% block content %}
<h1 class="mb-4">Uploaded Songs</h1>

{% if current_user.is_authenticated %}
<form action="{{ url_for('upload') }}" method="POST" enctype="multipart/form-data" class="mb-4">
  <div class="input-group">
    <input type="file" class="form-control" name="file" required>
    <button type="submit" class="btn btn-primary">Upload</button>
  </div>
</form>
{% endif %}

<div class="list-group">
{% for song in songs %}
  <div class="list-group-item d-flex justify-content-between align-items-center">
    <span>{{ song.filename }} {% if song.title %}- {{ song.title }}{% endif %}</span>
    <audio controls>
      <source src="{{ url_for('uploaded_file', filename=song.filename) }}" type="audio/mpeg">
      Your browser does not support the audio element.
    </audio>
  </div>
{% endfor %}
</div>
{% endblock %}
